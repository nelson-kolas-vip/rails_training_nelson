<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">
<%= render 'layouts/navbar' %>

<% if user_signed_in? %>
  <div class="offcanvas offcanvas-start bg-dark text-white" tabindex="-1" id="sidebarMenu" aria-labelledby="sidebarMenuLabel">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title" id="sidebarMenuLabel">Menu</h5>
      <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">

      <%= render 'layouts/sidebar' %>

      <hr class="text-white">
      <%= button_to destroy_user_session_path, method: :delete, class: "btn btn-danger w-100 d-flex align-items-center justify-content-center gap-2" do %>
        <i class="bi bi-box-arrow-right"></i>
        Sign Out
      <% end %>
    </div>
  </div>
<% end %>

<div class="container mt-5 text-center">
  <% if user_signed_in? %>
    <h1>Welcome back, <%= current_user.first_name.presence || current_user.email %>!</h1>
  <% else %>
    <h1>Login to Continue</h1>
  <% end %>
  <p class="lead">This is the homepage.</p>
</div>

<style>
  /* General Body & HTML Styling */

/* Navbar Enhancements */
.navbar {
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  transition: all 0.3s ease; /* Smooth transitions for any changes */
}

.navbar-brand.animate-brand {
  position: relative;
  transition: transform 0.3s ease-in-out, color 0.3s ease;
}

.navbar-brand.animate-brand:hover {
  transform: scale(1.05) rotate(2deg); /* Slight scale and rotation on hover */
  color: #00bcd4; /* A vibrant blue for brand hover */
}

.navbar-hamburger-btn {
  transition: transform 0.2s ease-in-out, color 0.2s ease;
}

.navbar-hamburger-btn:hover {
  transform: scale(1.1); /* Pop effect for hamburger icon */
  color: #00bcd4 !important; /* Match brand hover color */
}

.user-profile-info .avatar-img {
  transition: transform 0.2s ease;
}

.user-profile-info .avatar-img:hover {
  transform: scale(1.1) rotate(5deg); /* Slight rotation and scale on avatar hover */
}

.user-profile-info .user-name-display {
  transition: color 0.2s ease;
}

.user-profile-info .user-name-display:hover {
  color: #00bcd4 !important; /* Match brand hover color */
}


/* General Button Animations */
.animate-button {
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden; /* Hide overflow for ripple effect */
}

.animate-button:hover {
  transform: translateY(-2px); /* Lift effect */
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* Add shadow */
}

.animate-button:active {
  transform: translateY(0); /* Press down effect */
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

/* Dropdown Menu Animations */
.animate-dropdown.dropdown-menu {
  animation: fadeInScale 0.2s ease-out forwards;
  transform-origin: top right; /* From where the animation originates */
}

@keyframes fadeInScale {
  from {
    opacity: 0;
    transform: scale(0.9);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.animate-dropdown-item {
  transition: background-color 0.2s ease, transform 0.1s ease;
}

.animate-dropdown-item:hover {
  background-color: rgba(255, 255, 255, 0.1); /* Subtle hover for dark dropdown items */
  transform: translateX(3px); /* Slight slide for dropdown items */
}


/* Offcanvas Sidebar Custom Animation */
/* Override Bootstrap's default offcanvas transition */
.sidebar-offcanvas.offcanvas {
  transition: transform 0.4s cubic-bezier(0.25, 0.8, 0.25, 1); /* Slower, smoother ease-out-back */
}

/* Main Content Fade-in */
.content-fade-in {
  opacity: 0;
  transform: translateY(20px);
  animation: contentFadeIn 0.8s ease-out forwards;
  animation-delay: 0.3s; /* Delay for a smoother page load experience */
}

@keyframes contentFadeIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Heading and Lead Text Animations */
.animate-heading {
  opacity: 0;
  transform: translateY(20px);
  animation: headingSlideIn 0.7s ease-out forwards;
  animation-delay: 0.5s; /* Stagger the animation */
  font-weight: 700;
  color: #2c3034;
}

@keyframes headingSlideIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-lead {
  opacity: 0;
  transform: translateY(20px);
  animation: leadSlideIn 0.7s ease-out forwards;
  animation-delay: 0.7s; /* Stagger further */
  color: #555;
}

@keyframes leadSlideIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Example for the Sign Out button within the offcanvas */
.offcanvas-body .btn-danger {
    transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
}

.offcanvas-body .btn-danger:hover {
    background-color: #dc3545; /* Slightly darker red on hover */
    transform: translateY(-2px); /* Lift effect */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}

.offcanvas-body .btn-danger:active {
    transform: translateY(0);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}
</style>
