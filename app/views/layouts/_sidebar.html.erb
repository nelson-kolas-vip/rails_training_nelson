<div class="accordion accordion-flush" id="sidebarAccordion">

  <div class="accordion-item bg-dark text-white border-0">
    <h2 class="accordion-header" id="profileHeading">
      <button class="accordion-button collapsed bg-dark text-white" type="button"
              data-bs-toggle="collapse" data-bs-target="#profileCollapse"
              aria-expanded="false" aria-controls="profileCollapse">
        <i class="bi bi-person-circle me-2"></i>My Profile
      </button>
    </h2>
    <div id="profileCollapse" class="accordion-collapse collapse"
          aria-labelledby="profileHeading" data-bs-parent="#sidebarAccordion">
      <div class="accordion-body">
        <ul class="nav flex-column">
          <li class="nav-item">
            <%= link_to edit_avatar_path, class: "nav-link text-white sidebar-link" do %>
              <i class="bi bi-image me-2"></i>Update Avatar
            <% end %>
          </li>
          <li class="nav-item">
            <%= link_to edit_user_registration_path, class: "nav-link text-white sidebar-link" do %>
              <i class="bi bi-pencil-square me-2"></i>Update Profile Data
            <% end %>
          </li>
        </ul>
      </div>
    </div>
  </div>

  <% if current_user&.staff? %>
    <div class="accordion-item bg-dark text-white border-0">
      <h2 class="accordion-header" id="restaurantHeading">
        <button class="accordion-button collapsed bg-dark text-white" type="button"
                data-bs-toggle="collapse" data-bs-target="#restaurantCollapse"
                aria-expanded="false" aria-controls="restaurantCollapse">
          <i class="bi bi-shop-window me-2"></i>Restaurants
        </button>
      </h2>
      <div id="restaurantCollapse" class="accordion-collapse collapse"
           aria-labelledby="restaurantHeading" data-bs-parent="#sidebarAccordion">
        <div class="accordion-body">
          <ul class="nav flex-column">
            <li class="nav-item">
              <%= link_to restaurants_path, class: "nav-link text-white sidebar-link" do %>
                <i class="bi bi-list-ul me-2"></i>View All
              <% end %>
            </li>
            <li class="nav-item">
              <%= link_to new_restaurant_path, class: "nav-link text-white sidebar-link" do %>
                <i class="bi bi-plus-circle me-2"></i>Create New
              <% end %>
            </li>
          </ul>
        </div>
      </div>
    </div>
  <% end %>

  <% if current_user&.customer? %>
    <div class="accordion-item bg-dark text-white border-0">
      <h2 class="accordion-header" id="ordersHeading">
        <button class="accordion-button collapsed bg-dark text-white" type="button"
                data-bs-toggle="collapse" data-bs-target="#ordersCollapse"
                aria-expanded="false" aria-controls="ordersCollapse">
          <i class="bi bi-basket2 me-2"></i>Orders
        </button>
      </h2>
      <div id="ordersCollapse" class="accordion-collapse collapse"
           aria-labelledby="ordersHeading" data-bs-parent="#sidebarAccordion">
        <div class="accordion-body">
          <ul class="nav flex-column">
            <li class="nav-item">
              <%= link_to "#", class: "nav-link text-white sidebar-link" do %>
                <i class="bi bi-card-list me-2"></i>List Orders
              <% end %>
            </li>
            <li class="nav-item">
              <%= link_to "#", class: "nav-link text-white sidebar-link" do %>
                <i class="bi bi-hourglass-split me-2"></i>Current Orders
              <% end %>
            </li>
            <li class="nav-item">
              <%= link_to "#", class: "nav-link text-white sidebar-link" do %>
                <i class="bi bi-archive me-2"></i>Past Orders
              <% end %>
            </li>
          </ul>
        </div>
      </div>
    </div>
    <div class="accordion-item bg-dark text-white border-0">
      <h2 class="accordion-header" id="restaurantHeading">
        <button class="accordion-button collapsed bg-dark text-white" type="button"
                data-bs-toggle="collapse" data-bs-target="#restaurantCollapse"
                aria-expanded="false" aria-controls="restaurantCollapse">
          <i class="bi bi-shop-window me-2"></i>Restaurants
        </button>
      </h2>
      <div id="restaurantCollapse" class="accordion-collapse collapse"
           aria-labelledby="restaurantHeading" data-bs-parent="#sidebarAccordion">
        <div class="accordion-body">
          <ul class="nav flex-column">
            <li class="nav-item">
              <%= link_to restaurants_path, class: "nav-link text-white sidebar-link" do %>
                <i class="bi bi-list-ul me-2"></i>View All
              <% end %>
            </li>
            <li class="nav-item">
              <%= link_to new_restaurant_path, class: "nav-link text-white sidebar-link" do %>
                <i class="bi bi-plus-circle me-2"></i>Create New
              <% end %>
            </li>
          </ul>
        </div>
      </div>
    </div>
  <% end %>

</div>
<style>
    /* Overall Sidebar Styling */
#sidebarAccordion {
  background-color: #212529; /* Dark background for the whole accordion */
  border-radius: 8px; /* Slightly rounded corners for the sidebar */
  overflow: hidden; /* Ensures rounded corners are visible */
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3); /* Subtle shadow for depth */
}

/* Accordion Item Styling */
.accordion-item {
  border-bottom: 1px solid rgba(255, 255, 255, 0.1); /* Light border between items */
  transition: background-color 0.3s ease, transform 0.2s ease; /* Smooth transition for background and slight scale */
}

.accordion-item:last-child {
  border-bottom: none; /* No border on the last item */
}

/* Accordion Button Styling */
.accordion-button {
  color: #f8f9fa !important; /* Lighter text for better contrast */
  background-color: #212529 !important; /* Dark background */
  border: none !important;
  font-weight: 500;
  padding: 15px 20px;
  transition: background-color 0.3s ease, color 0.3s ease, transform 0.2s ease;
  display: flex; /* Use flexbox for icon alignment */
  align-items: center; /* Vertically align icon and text */
}

.accordion-button:not(.collapsed) {
  background-color: #343a40 !important; /* Slightly lighter background when open */
  color: #e9ecef !important; /* Slightly lighter text when open */
  box-shadow: inset 0 -1px 0 rgba(0, 0, 0, 0.2); /* Subtle shadow when open */
}

.accordion-button:hover {
  background-color: #343a40 !important; /* Hover effect for buttons */
  color: #ffffff !important;
  transform: translateY(-2px); /* Slight lift effect on hover */
}

.accordion-button::after {
  filter: invert(1); /* Invert caret color for dark background */
  transition: transform 0.3s ease; /* Smooth rotation of caret */
}

.accordion-button:not(.collapsed)::after {
  transform: rotate(180deg) invert(1); /* Rotate caret when expanded */
}

/* Accordion Body (Content Area) Styling */
.accordion-body {
  background-color: #2c3034; /* Slightly lighter dark background for content */
  padding: 0; /* Remove default padding to control li padding */
}

/* Navigation Links within Accordion Body */
.sidebar-link {
  padding: 10px 20px 10px 40px; /* Indent links and add vertical padding */
  display: flex; /* Make the entire link area clickable and use flex for icon alignment */
  align-items: center; /* Vertically align icon and text */
  color: #ced4da !important; /* Lighter grey for links */
  transition: background-color 0.2s ease, color 0.2s ease, transform 0.1s ease;
  position: relative; /* For the active indicator */
}

.sidebar-link:hover {
  background-color: #3b4248 !important; /* Darker background on hover */
  color: #ffffff !important; /* White text on hover */
  transform: translateX(5px); /* Slight slide effect on hover */
}

/* Optional: Active link indicator */
.sidebar-link.active {
  background-color: #007bff !important; /* Bootstrap primary blue for active */
  color: #ffffff !important;
  font-weight: bold;
  border-left: 5px solid #0056b3; /* Stronger indicator */
}

/* Icon Styling for links */
.sidebar-link i {
  font-size: 1em; /* Standard icon size */
  margin-right: 10px; /* Space between icon and text */
  color: #8fa6c3; /* A subtle blue tint for icons */
  transition: color 0.2s ease; /* Smooth color transition for icons */
}

.sidebar-link:hover i {
  color: #ffffff; /* White icon on hover */
}

/* Icon Styling for Accordion Headers */
.accordion-button i {
  font-size: 1.1em; /* Slightly larger icons */
  margin-right: 10px; /* Space between icon and text */
  color: #8fa6c3; /* A subtle blue tint for icons */
  transition: color 0.3s ease;
}

.accordion-button:hover i {
  color: #ffffff; /* White icon on hover */
}

/* Fade-in effect for accordion content (requires a bit of JS for perfect timing or careful CSS) */
/* This is built into Bootstrap's collapse, but we can enhance it */
.accordion-collapse.collapsing {
  height: 0;
  overflow: hidden;
  transition: height 0.35s ease; /* Bootstrap's default transition */
}

.accordion-collapse.show {
  display: block;
}
</style>
